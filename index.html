<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Teste de Servidor Node</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <h1>Teste de Comunica√ß√£o com o Servidor</h1>
    <p>Clique no bot√£o para fazer uma requisi√ß√£o <code>fetch</code> para a rota <code>/status</code> do servidor.</p>
    
    <button id="testButton">Testar Servidor</button>
    
    <hr>
    <h2>Resultado do Servidor:</h2>
    <pre id="resultArea">Aguardando o teste...</pre>

    <script src="/js/client.js"></script>
    <script>
console.log("‚úÖ client.js carregado!");

const testButton = document.getElementById('testButton');
const resultArea = document.getElementById('resultArea');

console.log("üïµÔ∏è‚Äç‚ôÇÔ∏è Procurando o bot√£o:", testButton);

if (testButton) {
  testButton.addEventListener('click', () => {
    console.log("üîò Bot√£o clicado! Iniciando fetch...");
    resultArea.textContent = 'Carregando...';
    resultArea.style.color = 'black';

    fetch('http://localhost:3333/status')
      .then(response => {
        console.log("‚û°Ô∏è Resposta recebida do servidor. Status:", response.status);
        if (!response.ok) {
          // Se o status n√£o for 2xx, lan√ßa um erro para cair no .catch()
          throw new Error(`O servidor respondeu com um erro: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        console.log("‚úîÔ∏è Sucesso! Dados recebidos:", data);
        resultArea.textContent = JSON.stringify(data, null, 2);
      })
      .catch(error => {
        // Se qualquer parte do processo falhar, este c√≥digo ser√° executado
        console.error("‚ùå ERRO NO FETCH:", error);
        console.log(response.json());
        resultArea.textContent = `Falha ao conectar com o servidor.\n\nERRO: ${error.message}\n\nVerifique o console (F12) para mais detalhes.`;
        resultArea.style.color = 'red';
      });
  });
} else {
  console.error("‚ùå N√£o foi poss√≠vel encontrar o elemento com id='testButton'");
}
    </script>
</body>
</html>